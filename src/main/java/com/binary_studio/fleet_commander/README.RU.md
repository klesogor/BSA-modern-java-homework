# Добро пожаловать во FleetCommander.
В этом задании вашей задачей будет создать пошаговый симулятор космических битв. Мы уже создали часть инфраструктуры и интерфейсы, чтобы вам помочь. 

# Rules of engagement
Основа данной игры - космические корабли. 
Корабли имеют несколько основных базовых характеристик: 
 - Скорость `Velocity` измеряется в `m/s`, 
 - Размер `Size` измеряется в `m`,
 - Мощность реактора `Power Grid(PG)` измеряется в `MW` 
 - Заряд аккамулятора `Capacitor(Cap)` измеряется в `GA/H`
 - Восстановление заряда аккамулятора в ход `Cap regen`
 - Состояние корпуса и щита `Hull/Shield` измеряеться в `EHP`

Каждый корабль состоит из двух подсистем: защитной и атакующей.
Изначально корабль находится в доке, в этом режиме к кораблю нужно подключать модули. Корабль не может выйти из дока, пока на него не установлена защитная и атакующая подсистемы.
Каждая система требует определённое колличество `PG`. Потребление `PG` суммируется, т.е. для того, чтобы установить две подсистемы с требованием к `PG` 50 MW и 25 MW потребуется корабль с 25 + 50 => 75 MW. При недостатке мощности реактора необходимо выбросить `NotEnoughPowergridException`.
Систему можно снять с корабля, передав в соответствующие методы `null`
Атакующая подсистема работает следующим образом: в её метод attack передаётся цель, после чего производится расчет нанесенного урона по следующей формуле: 
```
sizeReductionModifier = when targetSize >= optimalSize -> 1  
						else targetSize / optimalSize 	
speedReductionModifier = when targetSpeed <= optimalSpeed -> 1
                         else optimalSpeed / (2 * targetSpeed)
damage = baseDamage * min(sizeReductionModifier, speedReductionModifier)
 ```  
Полученный урон округляется до целого числа с округлением в большую сторону(т.е. при уроне больше 0, атака не может нанести меньше 1 единицы урона). Для атаки требуется определённое колличество заряда аккамулятора. При попытке атаковать с недостаточным колличеством заряда аккамулятора необходимо вернуть пустой Optional.


Защитная подсистема немного сложнее: она имеет пассивные и активные эффекты. Для активации защитной системы необходимо определённое кол-во заряда. Активация восстановливает `EHP` корпуса и щита. При попытке активировать защитную систему с недостаточным кол-вом заряда необходимо вернуть пустой Optional. Также защитная система пассивно снижает входящий урон на определённый процент. При уменьшении урона происходит округление до ближайшего целого в большую сторону. Урон не может быть снижен более чем на 95%.

Корабль оповещается о начале и конце хода. В конце хода корабль восстанавливает заряд аккамулятора. Заряд аккамулятора не может быть заряжен больше начального значения.

При получении урона у корабля уменьшается колличество щита и корпуса. Сначала урон получает щит. Если здоровье щита упало до 0, то остаток урона поулчает корпус. При регенерации щит и корпус восстанавливаются, используя регенерацию защитной подсистемы. Здоровье щитов и корпуса не может привышать изначальное значение. 

# Tips and tricks
1. Ваша задача - имплементировать следующие классы:
  `com.binary_studio.fleet_commander.core.ship.DockedVessel`  
  `com.binary_studio.fleet_commander.core.ship.CombatReadyVessel`
  `com.binary_studio.fleet_commander.core.subsystems.DefensiveSubsystemImpl`
  `com.binary_studio.fleet_commander.core.subsystems.AttackSubsystemImpl`
2. Посмотрите исходники тестов, это поможет понять ожидаемое поведение  
3. Нельзя изменять контракт существующих классов(сигнатуры методов), но изменять их реализацию можно и нужно. Так же вы можете создавать новые методы в уже существующих классах и интерфейсах или создавать новые классы и интерфейсы.
4. Начните выполнение задания с имплементации подсистем, а потом перейдите к имплеменатции корабля.
5. В данном задании можете не волноваться про null-safety, мы не будем передавать null в параметрах.

Удачи!
